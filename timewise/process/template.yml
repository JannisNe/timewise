channel:
- access:
  - ZTF_PUB
  name: wise
  policy: []
  version: 0
mongo:
  prefix: MONGODB_NAME
  reset: true
name: timewise
task:
- config:
    compiler_opts: TiCompilerOptions
    directives:
    - channel: wise
      ingest:
        mux:
          combine:
          - state_t2:
            - unit: T2StackVisits
            unit: T1HDBSCAN
            config:
              original_id_key: ORIGINAL_ID_KEY
              input_mongo_db_name: INPUT_MONGODB_NAME
              plot: true
          unit: TiMongoMuxer
    iter_max: 1000000
    shaper: TiDataPointShaper
    supplier:
      config:
        dpid: hash
        loader:
          config:
            timewise_config_file: TIMEWISE_CONFIG_PATH
            stock_id_column_name: ORIGINAL_ID_KEY
            multiplier: NCPU
          unit: TimewiseFileLoader
      unit: TimewiseAlertSupplier
  multiplier: NCPU
  title: t0
  template:
    live:
      - resolve_run_time_aliases
      - hash_t2_config
  unit: AlertConsumer
- config:
    log_profile: default
  multiplier: 1
  title: t2
  unit: T2Worker